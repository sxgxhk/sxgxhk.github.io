---
title: 使用disqus-php-api搭建评论系统
date: 2017-07-17 20:49
tags: 随笔
categories: 网站建设
permalink: 2485
---

众所周知的原因，国内已经访问不了Disqus评论了，暂时也无解，除非哪天GFW解除了这个限制（估计这个可能性……？），加上现在使用Ghost博客，其自身也没有带评论系统，以前还有多说可以使用，倒是用的挺好的，后来多说关闭之后，其它的诸如：畅言、友言、网易云跟贴（这个8月1日也要关闭了）等，感觉体验都不太好，或是太臃肿、或是有广告，反正用了几天就不想再用了。无奈之下，只好使用Disqus——这个老牌评论系统了。

<!--more-->

Disqus至少目前来看不会那么快翻船（这点真佩服老外），但是碍于现状，只能翻墙使用（经常爬梯子也累呀），后来听说有大神出了神器` disqus-php-api `，按他的理念是（原文摘抄）：

>我想起了一种方法，想要实现不翻墙即可访问 Disqus API，可以找一个服务器，客户端数据把发送到这个服务器，它接过手后顺便使用 cURL 发给 Disqus，根据 Disqus 返回的内容，服务器可直接返回给客户端，也可以将其简单处理一下再返回，感觉这也是反向代理。

![Disqus](https://cdn.uu126.cn/image/5/9f/0adebb87536f0945f5b59fe11438b.jpg)

既然有神器了，那就赶紧用吧，具体步骤如下：

 - 首先翻墙上Disqus官网申请，申请好之后在设置中输入用户名并记牢，然后再获取Disqus的部署代码，代码里还有后面需要内容，具体的申请等步骤可以问度娘，这里就不发散了

 - 然后下载Disqus-php-api，下载地址：
[https://github.com/fooleap/disqus-php-api][2]
,接着编辑` api `目录中的` config.php `，按照大神的说明填好，这里提醒一下一定要填在引号里面，要不然填错了，就不行了，我之前就发生过这样的问题，一直没发留意，结果还以为是主机故障，来来回回装了好几次系统和PHP环境，还是仔细点好。

 - 填好之后，记得在Ghost主题目录，像我在用的是默认主题，那就在` default.hbs `添加实例代码（Github上有的，改成自己的就行，另外因为是JS代码，前后记得加` <script> `和` </script> `，另外一个JS、CSS文件可以直接放在主题目录下，调用一下就可以了。

 - 上传` disqus-php-api `到你们国外空间上，需要注意的是` api `目录下的所有文件直接扔在根目录下就可以了，我之前放在` api `发现竟然找不到，按F12检查时，报404或“No input……”，不出什么问题的话，博客刷新一下就可以看到Disqus的评论框了。

感觉大神这个还是挺好的，使用也方便，也简洁，而且还可以设置成根据成根据用户访问IP（国内or国外）显示精简or完整评论，必须得赞一个。不过目前使用看来，有些文章会需要提交`  Thread `，点了提交也没反应，但是翻墙访问倒是正常，而且只有有评论了，国内再打开时评论也可以了，这点问题不知道大神能不能把它也给Kill了，期待吧。

更新一下，关于前面说要提交` Thread `的事，向大神请教了一下，发现我提交不了是因为` 主要是因为 slug 不能包含 / 字符 `
![Disqus2](https://cdn.uu126.cn/image/c/33/dbec01565fd37ccfd17cc55636fba.jpg)

一般都在` slug `后面，去掉` / `之后再点提交就可以了，当然也可以评论了。


[2]:https://github.com/fooleap/disqus-php-api
---
title: 坎坷的一天之从LNMP1.2升级到1.3
date: 2016-07-22 22:27
tags: lnmp
categories: 网站建设
permalink: 2146
---

![请输入图片描述][1] 

自从用上军哥的LNMP后，一直都很稳定（Linux也有功劳），军哥都是一年更新的（6.1一个特殊的日子，很多人都晓的吧……），最早用过1.1的，后来换主机换服务商什么的，就迎来了LNMP1.2，也就这样一直迎着，看现在1.3已经发布有段时间了，那个心痒呀（本人就是一折腾命，总是喜欢接触新事物），那赶紧动手吧。想保留目前的网站和资料那只能做无损升级了，也意味着保存工作开始了，数据库直接使用phpmyadmin直接导出（建议是每个数据库导一份，合在一起在恢复的时候容易出问题，反正我是分开的）。


<!--more-->


![请输入图片描述][2] 

导出数据库之后，建议把各站点的nginx配置文件也备份一份，接着将网站目录也暂时改一下名，弄好之后就开始卸载LNMP。
```python
cd lnmp1.2-full
./uninstall.sh
```
如果目录lnmp1.2-full没有的话，就要重新下载，然后再解压，再输入刚才的命令，按着自己安装的来选择卸载。

![请输入图片描述][3] 

输入对应的数字按回车，然后等待，一般都很快就可以卸载完成的。提示卸载完成后可以尝试输入：mysql命令，如果显示找不到的话，就说明LNMP已经卸载成功了！

那既然卸载完成了，就开始下载安装LNMP1.3吧，由于军哥的国内服务器暂停了，只能国外下载，导致下载速度慢到……（欲哭无泪吧，好几次挣扎在10KB/s），安装过程都很顺利，顺手把PHP也升了一下，结果导致eAccelerator无法兼容，不过好在memcache还是可以使用的（没有"d"的哦，如果安装时选择第2项memcached的话，那么wordpress的object-cache无法使用的。安装完LNMP1.3后，在配置站点时关联的数据库要使用原先站点的用户和密码，这样在phpmyadmin里就可以直接导入对应的数据库了。

恢复工作完成，网站就可以正常访问了，LNMP也由原先的1.2升级到了1.3（其实也差不多了，对于一般人来讲），顺手给网站添加了w3 total cache，先尝试用用看，这玩意要比那WP Super Cache麻烦那么一点，先用用看吧。

折腾虽然是一种兴趣，但却也伤神，得休息一下了。最


  [1]: https://cdn.uu126.cn/wp-content/uploads/2016/07/lnmp1.png
  [2]: https://cdn.uu126.cn/wp-content/uploads/2016/07/mysql1.png
  [3]: https://cdn.uu126.cn/wp-content/uploads/2016/07/lnmp2.png